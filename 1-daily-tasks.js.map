{"version":3,"file":"1-daily-tasks.js","sources":["../src/js/1-daily-tasks.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'http://localhost:3000/todos';\n\nconst form = document.querySelector('.todo__form');\nconst container = document.querySelector('.list');\n\nform.addEventListener('submit', handleSubmit);\ncontainer.addEventListener('click', handleUpdate);\ncontainer.addEventListener('click', handleDelete);\n\nasync function serviceTodos(url = BASE_URL, options = {}) {\n  const result = await axios(url, options);\n  return result.data;\n}\n\nfunction createMarkup(arr) {\n  return arr\n    .map(\n      ({ id, title, completed }) => `\n  <li class=\"list__item\" data-id=\"${id}\">\n  <input type=\"checkbox\" class=\"list__checkbox\" ${completed ? 'checked' : ''}>\n  <h2 class=\"list__title\">${title}</h2>\n  <button class=\"list__btn\">X</button>\n  </li>\n  `\n    )\n    .join('');\n}\n\nserviceTodos(BASE_URL)\n  .then(res => container.insertAdjacentHTML('beforeend', createMarkup(res)))\n  .catch(error => console.log(error.message));\n\nasync function handleSubmit(event) {\n  event.preventDefault();\n\n  const { todo } = event.currentTarget.elements;\n\n  if (!todo.value.trim) {\n    return;\n  }\n  try {\n    const data = await serviceTodos(BASE_URL, {\n      method: 'POST',\n      data: {\n        title: todo.value,\n        completed: false,\n      },\n    });\n\n    container.insertAdjacentHTML('beforeend', createMarkup([data]));\n  } catch (error) {\n    alert(error.message);\n  } finally {\n    event.target.reset();\n  }\n}\n\nasync function handleUpdate(event) {\n  if (!event.target.classList.contains('list__checkbox')) {\n    return;\n  }\n\n  event.preventDefault();\n\n  const parent = event.target.closest('.list__item');\n  const id = parent.dataset.id;\n\n  try {\n    const data = await serviceTodos(`${BASE_URL}/${id}`, {\n      method: 'PATCH',\n      data: {\n        completed: event.target.checked,\n      },\n    });\n\n    event.target.checked = data.completed;\n  } catch (error) {\n    alert(error.message);\n  }\n}\n\nasync function handleDelete(event) {\n  if (!event.target.classList.contains('list__btn')) {\n    return;\n  }\n\n  const parent = event.target.closest('.list__item');\n  const id = parent.dataset.id;\n\n  try {\n    await serviceTodos(`${BASE_URL}/${id}`, {\n      method: 'DELETE',\n    });\n\n    parent.remove();\n  } catch (error) {\n    console.log(error);\n  }\n}\n"],"names":["BASE_URL","form","container","handleSubmit","handleUpdate","handleDelete","serviceTodos","url","options","axios","createMarkup","arr","id","title","completed","res","error","event","todo","data","parent"],"mappings":"wIAEA,MAAMA,EAAW,8BAEXC,EAAO,SAAS,cAAc,aAAa,EAC3CC,EAAY,SAAS,cAAc,OAAO,EAEhDD,EAAK,iBAAiB,SAAUE,CAAY,EAC5CD,EAAU,iBAAiB,QAASE,CAAY,EAChDF,EAAU,iBAAiB,QAASG,CAAY,EAEhD,eAAeC,EAAaC,EAAMP,EAAUQ,EAAU,CAAA,EAAI,CAExD,OADe,MAAMC,EAAMF,EAAKC,CAAO,GACzB,IAChB,CAEA,SAASE,EAAaC,EAAK,CACzB,OAAOA,EACJ,IACC,CAAC,CAAE,GAAAC,EAAI,MAAAC,EAAO,UAAAC,CAAW,IAAK;AAAA,oCACAF,CAAE;AAAA,kDACYE,EAAY,UAAY,EAAE;AAAA,4BAChDD,CAAK;AAAA;AAAA;AAAA,GAI5B,EACA,KAAK,EAAE,CACZ,CAEAP,EAAaN,CAAQ,EAClB,KAAKe,GAAOb,EAAU,mBAAmB,YAAaQ,EAAaK,CAAG,CAAC,CAAC,EACxE,MAAMC,GAAS,QAAQ,IAAIA,EAAM,OAAO,CAAC,EAE5C,eAAeb,EAAac,EAAO,CACjCA,EAAM,eAAc,EAEpB,KAAM,CAAE,KAAAC,CAAM,EAAGD,EAAM,cAAc,SAErC,GAAKC,EAAK,MAAM,KAGhB,GAAI,CACF,MAAMC,EAAO,MAAMb,EAAaN,EAAU,CACxC,OAAQ,OACR,KAAM,CACJ,MAAOkB,EAAK,MACZ,UAAW,EACZ,CACP,CAAK,EAEDhB,EAAU,mBAAmB,YAAaQ,EAAa,CAACS,CAAI,CAAC,CAAC,CAC/D,OAAQH,EAAO,CACd,MAAMA,EAAM,OAAO,CACvB,QAAY,CACRC,EAAM,OAAO,OACd,CACH,CAEA,eAAeb,EAAaa,EAAO,CACjC,GAAI,CAACA,EAAM,OAAO,UAAU,SAAS,gBAAgB,EACnD,OAGFA,EAAM,eAAc,EAGpB,MAAML,EADSK,EAAM,OAAO,QAAQ,aAAa,EAC/B,QAAQ,GAE1B,GAAI,CACF,MAAME,EAAO,MAAMb,EAAa,GAAGN,CAAQ,IAAIY,CAAE,GAAI,CACnD,OAAQ,QACR,KAAM,CACJ,UAAWK,EAAM,OAAO,OACzB,CACP,CAAK,EAEDA,EAAM,OAAO,QAAUE,EAAK,SAC7B,OAAQH,EAAO,CACd,MAAMA,EAAM,OAAO,CACpB,CACH,CAEA,eAAeX,EAAaY,EAAO,CACjC,GAAI,CAACA,EAAM,OAAO,UAAU,SAAS,WAAW,EAC9C,OAGF,MAAMG,EAASH,EAAM,OAAO,QAAQ,aAAa,EAC3CL,EAAKQ,EAAO,QAAQ,GAE1B,GAAI,CACF,MAAMd,EAAa,GAAGN,CAAQ,IAAIY,CAAE,GAAI,CACtC,OAAQ,QACd,CAAK,EAEDQ,EAAO,OAAM,CACd,OAAQJ,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CACH"}